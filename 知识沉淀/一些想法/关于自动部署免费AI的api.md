# 免费AI聚合模块

## 背景

市面上有很多免费AI的API可以用，但是如果需要自己手动去切换就很麻烦。所以可以实现一个模块，在自己的网站上接入这个模块，就能实现免费用所有AI了。

## 核心目标

- 做一个**可嵌入的模块**，方便接入自己的网站
- **专注免费AI**，自动管理各平台的免费额度
- 额度用完后**自动切换**到下一个可用的API
- 支持**多种AI类型**：文本生成、图像识别等

## 功能设计

### 1. API管理
- 通过配置文件预先填入各平台的API Key
- 支持多个平台同时配置
- 记录各平台的额度使用情况

### 2. 自动切换策略
- 检测到额度不足/API报错时，自动切换到下一个
- 支持设置优先级（优先用哪个平台）
- 定时检测各API的可用性

### 3. 统一调用接口
- 对外暴露统一的调用方法
- 内部自动适配不同平台的请求/响应格式
- 调用方无需关心底层用的是哪个AI

## 支持的AI类型

| 类型 | 可选平台（免费额度） |
|------|---------------------|
| 文本生成 | Groq、Cohere、Google AI Studio、Cloudflare Workers AI、HuggingFace |
| 图像识别 | Google AI Studio（Gemini）、HuggingFace |
| 图像生成 | Cloudflare Workers AI、HuggingFace |

> 后续可根据需要扩展更多平台

## 技术实现思路

```
配置文件 (config.json)
    ↓
模块初始化：加载所有API Key
    ↓
调用请求 → 选择可用API → 发送请求
    ↓
成功 → 返回结果
失败 → 标记当前API不可用 → 切换下一个 → 重试
```

### 核心模块
1. **ConfigManager**：读取和管理配置文件
2. **APIAdapter**：适配不同平台的请求格式
3. **Switcher**：自动切换逻辑，故障转移
4. **QuotaTracker**：追踪各平台额度使用情况（可选）

## 与现有项目的区别

| 现有项目 | 定位 | 差异 |
|----------|------|------|
| One API | 独立部署的转发服务 | 不是嵌入式模块，不专注免费AI |
| LiteLLM | Python库 | 只支持LLM，无自动切换免费额度功能 |
| OpenRouter | 商业服务 | 需要付费 |

本模块的特点：**轻量、嵌入式、专注免费AI、自动切换**

## 实施计划

- [ ] MVP版本：先支持3-5个文本生成平台
- [ ] 实现自动切换和故障转移
- [ ] 扩展支持图像识别/生成
- [ ] 可选：增加额度追踪功能
